<div id="milestone-view" v-cloak>
  <div class="container">
    <div class="row mt-3">
      <div class="col">
        <span class="text-muted"><%= __('Team') %></span><span class="h5 ml-3"><a
            :href="teamUrl">{{ team.name }}</a></span>
      </div>
    </div>
    <div class="mt-3" v-if="tasks.length > 0 && !isMobile">
      <gantt-elastic :options="options" :tasks="tasks" :dynamic-style="dynamicStyle">
        <gantt-header slot="header" :options="headerOptions" :dynamic-style="headrDynamicStyle"></gantt-header>
      </gantt-elastic>
    </div>
    <div class="mt-3" v-else-if="tasks.length > 0 && isMobile">
      <h4><%= __('Milestones') %></h4>
      <div class="row mb-3" v-for="item in tasks">
        <div class="col">
          <div class="row">
            <div class="col">
              <a :href="editLink(item.entity)" style="color:#0077c0;" data-toggle="tooltip" data-placement="bottom"
                :title="i18n('Edit')">{{ item.entity.name }}</a>
            </div>
          </div>
          <div class="row">
            <div class="col"><%= __('Start') %>: {{ startDate(item.entity) }}</div>
          </div>
          <div class="row">
            <div class="col"><%= __('End') %>: {{ endDate(item.entity) }}</div>
          </div>
          <div class="row">
            <div class="col">
              <%= __('Person in charge') %>: <a :href="memberLink(item.entity)" target="_blank"
                style="color:#0077c0;">{{ item.entity.user ? item.entity.user.fullName : '' }}</a>
            </div>
          </div>
          <div class="progress">
            <div class="progress-bar progress-bar-striped bg-success" role="progressbar"
              :style="progressStyle(item.entity)" :aria-valuenow="progressValue(item.entity)" aria-valuemin="0"
              aria-valuemax="100"></div>
          </div>
          <div class="row">
            <div class="col-auto">
              <small><%= __('Progress') %>: {{ progressValue(item.entity) }} %</small>
            </div>
            <div class="col"><small><a href="javascript:void(0)"
                  @click="clickThreadsForMobile(item.entity)"><%= __('Related thread') %></a>
                <span class="ml-3">{{ item.entity.closedQty }} /
                  {{ Number(item.entity.openQty) + Number(item.entity.closedQty) }}</span>
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div v-else>
      <div class="alert alert-primary" role="alert">
        <%= __('Milestones are groups of threads in a specific time period (phase)') %><br />
        <%= __('Create a milestone with the new button') %><br />
        <%= __('Creating milestones allows each thread to be associated with a milestone') %>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col text-right">
        <a class="btn btn-light btn-sm" :href="returnUrl"><i class="fas fa-window-close"></i> <%= __("Back") %></a>
        <button type="button" class="btn btn-info btn-sm" @click="clickSort">
          <i class="fas fa-sort"></i> <%= __("Sort") %>
        </button>
        <button type="button" class="btn btn-info btn-sm" @click="clickNew">
          <i class="fas fa-plus-circle"></i> <%= __("Create New") %>
        </button>
      </div>
    </div>
  </div>
</div>
<%- /* Expose server-rendered data as window.SAILS_LOCALS :: */ exposeLocalsToBrowser() %>